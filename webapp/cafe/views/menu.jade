extends ../node_modules/jade-bootstrap/_bootstrap

append styles
    // Bootstrap theme
    link(rel="stylesheet", href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css")
    // Custom styles for this template
    link(href='node_modules/jade-bootstrap/css/theme.css', rel='stylesheet')

block body
    +navbar-fixed("Arkadia Cafe","navbar","inverse")
        +nav_item("/","active") Menu
        +nav_item("/views") PodglÄ…d
        +nav_item("/logout") Wyloguj
    .container.theme-showcase(role='main')
        .page-header
            h1 Menu
        #menu

append scripts
    script( src='node_modules/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js' )
    script.
        var url = "api";

        // Load object
        function loadObject(edge, id, callback) {
            $.get(url+"/"+edge+"/"+encodeURIComponent(id))
                .done(function(data) {
                    console.log("Got " + edge + " from the server:", data);
                    callback(data);
                })
                .fail(function(err) {
                    msg = "Getting " + edge + " from the server failed.";
                    console.error(msg);
                    console.log(err);
                    window.alert(msg);
                });
        }

        $( document ).ready( function() {


            // Load references  
            var kitchens = [];
            loadObject("kitchens", "", function(data) {
                kitchens = data;
            });
            var poses = [];
            loadObject("poses", "", function(data) {
                poses = data;
            });
            var foods = [];
            loadObject("foods", "", function(data) {
                foods = data;
            });
            var menu_types = [];
            loadObject("menu_types", "", function(data) {
                menu_types = data;
            });

            $.when($.ajax("/api/kitchens"), $.ajax("/api/poses"), $.ajax("/api/foods"), $.ajax("/api/kitchens"))
                .then(

            // Build the form
            var form_top = $('<div>').addClass('form-horizontal').attr('role', 'form').append(
                $('<div>').addClass('form-group').append(
                    $('<label>').addClass('control-label col-sm-2').text("Data"),
                    $('<div>').addClass('col-sm-9').append(
                        $('<input>').addClass('form-control datepicker').attr('id', 'menu_date')
                    ),
                    $('<div>').addClass('col-sm-1')
                ),
                $('<div>').addClass('form-group').append(
                    $('<label>').addClass('control-label col-sm-2').text("Typ"),
                    $('<div>').addClass('col-sm-9').append(
                        $('<select>').addClass('form-control').attr('id', 'menu_type').append(
                            $.each(menu_types, function(id, name, description) {
                                return $('<option>').value(id).text(name)
                            })
                        )
                    ),
                    $('<div>').addClass('col-sm-1')
                ),
                $('<div>').addClass('form-group').append(
                    $('<label>').addClass('control-label col-sm-2').text("Notatki"),
                    $('<div>').addClass('col-sm-9').append(
                        $('<input>').addClass('form-control').attr('id', 'menu_notes')
                    ),
                    $('<div>').addClass('col-sm-1')
                )
            );

            $('#menu').append(form_top);
            $('.datepicker').datepicker();



        });


        


